<form [formGroup]="data.form" 
(ngSubmit)="submit()">


<h1 mat-dialog-title>
    {{data.view === 'CREATE' ? 'Nuevo Empleado' : 'Editar Empleado'}}
</h1>
<div mat-dialog-content>


    <div class="d-flex justify-content-center my-5" *ngIf="loading">
        <mat-spinner></mat-spinner>
    </div>

    <div class="row" *ngIf="(data.view === 'CREATE' || data.view === 'UPDATE') && !loading">
        <div class="col-12 text-center">

                <div class="row">
                    <div class="col-6">
                        <ng-select [items]="employees"
                                bindLabel="name"
                                bindValue="id"
                                formControlName="employe"
                                placeholder="Empleado">
                        </ng-select>
                        <!-- <mat-form-field class="w-100" appearance="fill">
                            <mat-label>Empleado</mat-label>
                            <input matInput placeholder="Ej. Juan" formControlName="employee">
                        </mat-form-field> -->
                        <!-- <mat-form-field class="example-full-width" appearance="fill">
                            <mat-label>Proveedor</mat-label>
                            <input type="text"
                                   placeholder="Seleccionar"
                                   aria-label="Empleado"
                                   matInput
                                   [matAutocomplete]="autoEmployees">
                            <mat-autocomplete autoActiveFirstOption #autoEmployees="matAutocomplete" [displayWith]="displayFn"
                            (optionSelected)="onEmployeeSelectionChange($event)">
                              <mat-option *ngFor="let employee of filteredEmployeesOptions | async" [value]="employee">
                                {{employee.name}}
                              </mat-option>
                            </mat-autocomplete>
                          </mat-form-field> -->
                    </div>
                    <div class="col-6">
                        <ng-select [items]="clients"
                                bindLabel="name"
                                bindValue="id"
                                formControlName="client"
                                placeholder="Cliente">
                        </ng-select>
                        <!-- <mat-form-field class="w-100" appearance="fill">
                            <mat-label>Cliente</mat-label>
                            <input matInput placeholder="Ej. Pedro" formControlName="client">
                        </mat-form-field> -->
                        <!-- <mat-form-field class="example-full-width" appearance="fill">
                            <mat-label>Proveedor</mat-label>
                            <input type="text"
                                   placeholder="Seleccionar"
                                   aria-label="Cliente"
                                   matInput
                                   [matAutocomplete]="autoClients">
                            <mat-autocomplete autoActiveFirstOption #autoClients="matAutocomplete" [displayWith]="displayFn"
                            (optionSelected)="onClientSelectionChange($event)">
                              <mat-option *ngFor="let client of filteredClientsOptions | async" [value]="client">
                                {{client.name}}
                              </mat-option>
                            </mat-autocomplete>
                          </mat-form-field> -->
                    </div>
                    <div class="col-6">
                        <mat-form-field class="w-100" appearance="fill">
                            <mat-label>Producto</mat-label>
                            <input matInput placeholder="Ej. 1040851792" type="text"
                                formControlName="product">
                        </mat-form-field>
                    </div>
                    <div class="col-6">
                        <mat-form-field class="w-100" appearance="fill">
                            <mat-label>Servicio</mat-label>
                            <input matInput placeholder="Ej. Corte" type="text" formControlName="service">
                        </mat-form-field>
                    </div>
                    <div class="col-6">
                        <mat-form-field class="w-100" appearance="fill">
                            <mat-label>Precio</mat-label>
                            <input matInput placeholder="Ej. 3158544010" type="number" formControlName="price">
                        </mat-form-field>
                    </div>
                    <div class="col-6">
                        <mat-form-field class="w-100" appearance="fill">
                            <mat-label>Soubtotal</mat-label>
                            <input matInput placeholder="Ej. 3158544010" type="number" formControlName="subtotal">
                        </mat-form-field>
                    </div>
                    <div class="col-6">
                        <mat-form-field class="w-100" appearance="fill">
                            <mat-label>Descuento</mat-label>
                            <input matInput placeholder="Ej. 3158544010" type="number" formControlName="discount">
                        </mat-form-field>
                    </div>
                    <div class="col-6">
                        <mat-form-field class="w-100" appearance="fill">
                            <mat-label>Total</mat-label>
                            <input matInput placeholder="Ej. 3158544010" type="number" formControlName="total">
                        </mat-form-field>
                    </div>
                </div>
        </div>
    </div>
    

</div>

<div mat-dialog-actions>

    <button type="button" mat-raised-button color="secondary"
            id="closeButton" (click)="onNoClick()">Salir</button>
        &nbsp;
        <button mat-raised-button [disabled]="data.form.invalid || loading"
                                color="primary" type="submit"
                                *ngIf="data.view === 'CREATE'">Crear</button>
        <button mat-raised-button [disabled]="data.form.invalid || loading"
                                color="primary" type="submit"
                                *ngIf="data.view === 'UPDATE'">Actualizar</button>
    
</div>

</form>
